"use strict";const _=(e,r,u,m,o)=>'<summary><span class="pre-summary">&nbsp;</span>'+o.renderInline(e[r].children,u,m)+"</summary>";function y(e,r,u){for(r;r<u;r++)if(!e.md.utils.isWhiteSpace(e.src.charCodeAt(r)))return!1;return!0}const p=43,f=62,A=(e,r,u,m)=>{let o=!0,b=!0,h=!1,l=e.bMarks[r]+e.tShift[r],s=e.eMarks[r];if(e.src.charCodeAt(l)!==p&&(o=!1),e.src.charCodeAt(l)!==f&&(b=!1),!o&&!b)return!1;let i=e.skipChars(l,o?p:f);const k=i-l;if(k<3)return!1;const M=e.src.slice(l,i),a=e.src.slice(i,s).trim();if(y(e,i,s)||a.endsWith(String.fromCharCode(o?p:f).repeat(k)))return!1;if(m)return!0;let n=r,d=!0;for(;n++,!(n>=u||(l=e.bMarks[n]+e.tShift[n],s=e.eMarks[n],l<s&&e.sCount[n]<e.blkIndent));){if(e.src.charCodeAt(l)!==(o?p:f)){d&&(d=y(e,l,s));continue}if(!(e.sCount[n]-e.blkIndent>=4)&&(i=e.skipChars(l,o?p:f),!(i-l<k)&&(i=e.skipSpaces(i),!(i<s)))){h=!0;break}}if(d)return!1;const x=e.parentType,R=e.lineMax;e.parentType="reference",e.lineMax=n;const S=o?'details class="collapsible" open':'details class="collapsible"';let c=e.push("collapsible_open",S,1);c.block=!0,c.info=a,c.markup=M,c.map=[r,n];const C=[];return e.md.inline.parse(a,e.md,e.env,C),c=e.push("collapsible_summary","summary",0),c.content=a,c.children=C,e.md.block.tokenize(e,r+1,n),c=e.push("collapsible_close","details",-1),c.markup=e.src.slice(l,i),c.block=!0,e.parentType=x,e.lineMax=R,e.line=n+(h?1:0),!0},E=e=>{e.block.ruler.before("fence","collapsible",A,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.collapsible_summary=_};module.exports=E;
